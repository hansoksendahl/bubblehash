var bubblehash=function bubblehash(){var out={};function logger(messages,prefix){prefix=prefix?prefix+": ":"";function log(code,type){return function(err){type=type||"log";err=err||"";var message=prefix+messages[code];if(err){message+="\n\n"+err}console[type](message)}}log.warning=function(code){return log(code,"warning")};log.error=function(code){return log(code,"error")};return log}out.logger=logger;var xhr=function xhr(){var logMessages={},log;logMessages[0]="We get signal!";logMessages[1]="Opening connection...";logMessages[8192]="Connction attempt timed out.";logMessages[8193]="Lost signal.";log=logger(logMessages,"Signal");return function init(url){var request=new XMLHttpRequest,out={},headers={},data;request.ontimeout=log(8192);request.onerror=log(8193);function send(type,callback){var queryString="",queryIndex,key;if(data){queryString="json="+JSON.stringify(data);if(type==="get"){queryIndex=url.indexOf("?");if(queryIndex!==-1){url.replace("?","?"+queryString+"&")}}}request.open(type,url);for(key in headers){request.setRequestHeader(key,headers[key])}request.onload=callback;if(type==="post"){request.setRequestHeader("Content-type","application/x-www-form-urlencoded");request.send(queryString)}else{request.send()}}out.headers=function headers(key,value){if(arguments.length<2){if(typeof key==="string"){return headers[key]}for(value in key){headers[value]=key[value]}}else{headers[key]=value}};out.data=function dataSetter(obj){if(arguments.length===0){return data}data=obj;return out};out.get=function get(callback){send("get",callback);return out};out.post=function(callback){send("post",callback);return out};return out}}();out.xhr=xhr}();